<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Diary ❤️</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="main.js"></script>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage">
        <div class="login-container">
            <h2>💕 Our Love Diary 💕</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn-primary">Login</button>
            </form>
            <div class="toggle-form">
                Belum punya akun? <a href="#" id="showRegister">Daftar di sini</a>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="hidden">
        <div class="login-container">
            <h2>💕 Daftar Akun Baru 💕</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="registerUsername" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label>Kode Pasangan (opsional - untuk berbagi diary)</label>
                    <input type="text" id="coupleCode" placeholder="Masukkan kode pasangan Anda">
                </div>
                <button type="submit" class="btn-primary">Daftar</button>
            </form>
            <div class="toggle-form">
                Sudah punya akun? <a href="#" id="showLogin">Login di sini</a>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <div class="container">
            <header>
                <h1>❤️ Our Love Story ❤️</h1>
                <div class="user-info">
                    <div class="user-name">Selamat datang, <span id="currentUserName"></span>!</div>
                    <div>
                        <span style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; margin-right: 10px;">
                            Kode: <strong id="displayCoupleCode"></strong>
                        </span>
                        <button class="btn-logout" onclick="logout()">Logout</button>
                    </div>
                </div>
            </header>

            <!-- Add Entry Section -->
            <div class="add-entry-section">
                <h2>✨ Tambah Kenangan Baru</h2>
                <form id="addEntryForm">
                    <div class="form-group">
                        <label>Ceritakan momen spesialmu...</label>
                        <textarea id="entryText" required placeholder="Tulis cerita atau catatan harian di sini..."></textarea>
                    </div>
                    <div class="form-group">
                        <div class="file-input-wrapper">
                            <label class="file-input-label" for="entryImage">📷 Pilih Foto</label>
                            <input type="file" id="entryImage" accept="image/*">
                        </div>
                        <img id="imagePreview" class="image-preview" alt="Preview">
                    </div>
                    <button type="submit" class="btn-primary">Simpan Kenangan 💕</button>
                </form>
            </div>

            <!-- Timeline Section -->
            <div class="timeline" id="timeline">
                <div class="empty-state">
                    <h3>Belum ada kenangan tersimpan</h3>
                    <p>Mulai tulis cerita cinta kalian! 💑</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" id="scrollToTopBtn" onclick="scrollToTop()">↑</button>

    <!-- Music Player (Outside mainApp) -->
    <div class="music-player minimized hidden" id="musicPlayer">
        <div class="minimized-icon" onclick="toggleMusicPlayer()">🎵</div>
        <div class="music-content">
            <div class="music-header">
                <h3>🎵 Our Playlist</h3>
                <button class="btn-minimize" onclick="toggleMusicPlayer()">−</button>
            </div>

            <div class="audio-player" id="audioPlayerSection" style="display: none;">
                <div class="now-playing-info">
                    <div class="title" id="nowPlayingTitle">-</div>
                    <div class="artist" id="nowPlayingArtist">-</div>
                </div>
                <audio id="audioPlayer" controls></audio>
            </div>

            <div class="search-section">
                <h4>🎵 Tambah Lagu ke Playlist</h4>

                <!-- Drag & Drop Zone -->
                <div class="upload-zone" id="uploadZone" onclick="document.getElementById('audioFileInput').click()">
                    <div class="upload-icon">🎵</div>
                    <div class="upload-text">Drag & Drop lagu di sini</div>
                    <div class="upload-hint">atau klik untuk pilih file</div>
                    <div style="font-size: 0.75em; color: #aaa; margin-top: 10px;">Format: MP3, WAV, OGG, M4A</div>
                </div>
                <input type="file" id="audioFileInput" accept="audio/*" multiple onchange="handleAudioUpload(event)">
            </div>

            <div class="playlist-header">📝 Playlist Kami</div>
            <div class="playlist" id="playlist">
                <div class="empty-playlist">Belum ada lagu di playlist 🎵<br>Cari dan tambahkan lagu favorit!</div>
            </div>
        </div>
    </div>
</body>

</html>
